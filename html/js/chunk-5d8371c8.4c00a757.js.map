{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.array.find-index.js","webpack:///./src/views/PlayListDetail.vue?907c","webpack:///src/views/PlayListDetail.vue","webpack:///./src/views/PlayListDetail.vue?bb4c","webpack:///./src/views/PlayListDetail.vue","webpack:///./src/views/PlayListDetail.vue?0e71"],"names":["$export","$find","KEY","forced","Array","P","F","findIndex","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","on","getShowIndex","listInfo","loading","list","staticStyle","_v","_e","attrs","cover","_s","name","userList","platform","mine","listId","sub","class","$event","collectPlaylist","creator","nick","directives","rawName","value","expression","domProps","target","composing","search","playListShow","downShow","allList","id","style","smallIndex","_l","s","i","allSongs","bigIndex","key","playNow","aId","url","playMusic","playingPercent","al","picUrl","ar","map","a","join","favListId","favSongMap","likeMusic","from","playlistTracks","playingList","removePlaying","addPlaying","download","indexOf","scrollToPlayNow","staticRenderFns","component"],"mappings":"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","file":"js/chunk-5d8371c8.4c00a757.js","sourcesContent":["'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list-detail-container\",on:{\"scroll\":_vm.getShowIndex}},[(!_vm.listInfo && _vm.loading && _vm.list.length === 0)?_c('div',{staticClass:\"text-center fc_fff ft_20\",staticStyle:{\"padding-top\":\"100px\",\"opacity\":\"0.8\",\"letter-spacing\":\"2px\"}},[_vm._v(\"拼命查找了！\")]):_vm._e(),(!_vm.loading)?_c('div',{staticClass:\"list-info-detail\"},[(_vm.listInfo)?_c('div',[_c('img',{staticClass:\"list-info-cover\",attrs:{\"src\":_vm.listInfo.cover}}),_c('div',{staticClass:\"list-info-txt\"},[_c('div',{staticClass:\"list-info-name\"},[_vm._v(_vm._s(_vm.listInfo.name))]),_c('div',{staticClass:\"list-info-creator\"},[(_vm.userList[_vm.platform] && !_vm.userList[_vm.platform].mine[_vm.listId])?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":_vm.userList[_vm.platform].sub[_vm.listId] ? '已收藏' : '收藏',\"placement\":\"top\"}},[_c('i',{class:(\"collect-btn mr_10 iconfont icon-\" + (_vm.userList[_vm.platform].sub[_vm.listId] ? 'collected' : 'collect')),on:{\"click\":function($event){return _vm.collectPlaylist(_vm.listInfo)}}})]):_vm._e(),_c('span',[_vm._v(\"By \"),_c('span',{staticClass:\"creator-name\"},[_vm._v(_vm._s(_vm.listInfo.creator.nick))])])],1)])]):_vm._e(),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],staticClass:\"search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"找呀找呀找歌曲\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}}),_c('div',{staticClass:\"inline-block mt_15 pt_5\"},[_vm._v(\"下列歌曲：\")]),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"播放\",\"placement\":\"top\"}},[(_vm.list.length > 0)?_c('div',{staticClass:\"inline-block mt_15 pt_5 pointer play\",staticStyle:{\"line-height\":\"20px\"},on:{\"click\":function($event){return _vm.playListShow(true)}}},[_c('i',{staticClass:\"iconfont icon-play pl_10 pr_10\"})]):_vm._e()]),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"添加到播放列表\",\"placement\":\"top\"}},[(_vm.list.length > 0)?_c('div',{staticClass:\"inline-block mt_15 pt_5 pointer play\",staticStyle:{\"line-height\":\"20px\"},on:{\"click\":function($event){return _vm.playListShow()}}},[_c('i',{staticClass:\"iconfont icon-list-add pl_10 pr_10\"})]):_vm._e()]),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"下载\",\"placement\":\"top\"}},[(_vm.list.length > 0)?_c('div',{staticClass:\"inline-block mt_15 pt_5 pointer play\",staticStyle:{\"line-height\":\"20px\"},on:{\"click\":_vm.downShow}},[_c('i',{staticClass:\"iconfont icon-download pl_10 pr_10\"})]):_vm._e()])],1)]):_vm._e(),(_vm.allList[_vm.listId] || _vm.id === 'playing')?_c('div',{staticClass:\"song-list\"},[_c('div',{style:((\"height:\" + (_vm.smallIndex*71) + \"px;\"))}),_vm._l((_vm.list),function(s,i){return (_vm.allSongs[s] && i >= _vm.smallIndex && i <= _vm.bigIndex)?_c('div',{key:(s + \"-\" + i),class:(\"song-item \" + (_vm.playNow.aId === s ? 'played' : '') + \" \" + (!_vm.allSongs[s].url ? 'disabled' : '') + \" \" + (((i < _vm.smallIndex) || (i > _vm.bigIndex)) ? 'hidden' : '')),on:{\"click\":function($event){return _vm.playMusic(s, _vm.list, _vm.listId)}}},[(_vm.playNow.aId === s)?_c('div',{staticClass:\"playing-bg\",style:((\"width: \" + (_vm.playingPercent * 100) + \"%\"))},[_c('div',{staticClass:\"wave-bg\"}),_c('div',{staticClass:\"wave-bg2\"})]):_vm._e(),_c('span',{staticClass:\"song-order\"},[_vm._v(_vm._s(i+1))]),_c('img',{staticClass:\"song-cover\",attrs:{\"src\":((_vm.allSongs[s].al && _vm.allSongs[s].al.picUrl) + \"?param=50y50\"),\"alt\":\"\"}}),_c('span',{staticClass:\"song-name\"},[_vm._v(_vm._s(_vm.allSongs[s].name))]),_c('span',{staticClass:\"song-artist\"},[_vm._v(_vm._s((_vm.allSongs[s].ar || []).map(function (a) { return a.name; }).join('/')))]),_c('div',{staticClass:\"icon-container\"},[(_vm.userList[_vm.allSongs[s].platform] && (_vm.listId !== _vm.userList[_vm.allSongs[s].platform].favListId))?_c('i',{class:(\"operation-icon operation-icon-1 iconfont icon-\" + (!!_vm.favSongMap[_vm.allSongs[s].platform][s] ? 'like' : 'unlike')),on:{\"click\":function($event){return _vm.likeMusic(s)}}}):_vm._e(),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"添加到歌单\",\"placement\":\"top\"}},[(_vm.allSongs[s].from !== 'migu')?_c('i',{staticClass:\"operation-icon operation-icon-2 iconfont icon-add\",on:{\"click\":function($event){return _vm.playlistTracks(s, _vm.listId, 'add', 'ADD_SONG_2_LIST', _vm.allSongs[s].platform)}}}):_vm._e()]),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"移出播放列表\",\"placement\":\"top\"}},[(_vm.playingList.map[s])?_c('i',{staticClass:\"operation-icon operation-icon-3 iconfont icon-list-reomve\",on:{\"click\":function($event){return _vm.removePlaying(s)}}}):_vm._e()]),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"加入播放列表\",\"placement\":\"top\"}},[(_vm.allSongs[s].url && !_vm.playingList.map[s])?_c('i',{staticClass:\"operation-icon operation-icon-3 iconfont icon-list-add\",on:{\"click\":function($event){return _vm.addPlaying(s)}}}):_vm._e()]),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"下载\",\"placement\":\"top\"}},[(!!_vm.allSongs[s].url)?_c('i',{staticClass:\"operation-icon operation-icon-4 iconfont icon-download\",on:{\"click\":function($event){return _vm.download(s)}}}):_vm._e()]),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"从歌单中删除\",\"placement\":\"top\"}},[(_vm.userList[_vm.allSongs[s].platform] && _vm.userList[_vm.allSongs[s].platform].mine && _vm.userList[_vm.allSongs[s].platform].mine[_vm.listId])?_c('i',{staticClass:\"operation-icon operation-icon-5 iconfont icon-delete\",on:{\"click\":function($event){return _vm.playlistTracks(s, _vm.listId, 'del', 'DEL_SONG')}}}):_vm._e()])],1)]):_vm._e()}),_c('div',{style:((\"min-height:0;height:\" + ((_vm.list.length - _vm.bigIndex)*71) + \"px;\"))}),(_vm.list.indexOf(_vm.playNow.aId) > -1)?_c('div',{staticClass:\"focus-btn\",on:{\"click\":_vm.scrollToPlayNow}},[_c('i',{staticClass:\"iconfont icon-focus\"})]):_vm._e()],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"list-detail-container\" @scroll=\"getShowIndex\">\n    <div v-if=\"!listInfo && loading && list.length === 0\" class=\"text-center fc_fff ft_20\" style=\"padding-top: 100px;opacity: 0.8;letter-spacing: 2px;\">拼命查找了！</div>\n    <div v-if=\"!loading\" class=\"list-info-detail\">\n      <div v-if=\"listInfo\">\n        <img class=\"list-info-cover\" :src=\"listInfo.cover\">\n        <div class=\"list-info-txt\">\n          <div class=\"list-info-name\">{{listInfo.name}}</div>\n          <div class=\"list-info-creator\">\n            <el-tooltip\n              v-if=\"userList[platform] && !userList[platform].mine[listId]\"\n              class=\"item\"\n              effect=\"dark\"\n              :content=\"userList[platform].sub[listId] ? '已收藏' : '收藏'\"\n              placement=\"top\"\n            >\n              <i @click=\"collectPlaylist(listInfo)\" :class=\"`collect-btn mr_10 iconfont icon-${userList[platform].sub[listId] ? 'collected' : 'collect'}`\" />\n            </el-tooltip>\n            <span>By <span class=\"creator-name\">{{listInfo.creator.nick}}</span></span>\n          </div>\n        </div>\n      </div>\n      <div>\n        <input v-model=\"search\" class=\"search-input\" type=\"text\" placeholder=\"找呀找呀找歌曲\">\n        <div class=\"inline-block mt_15 pt_5\">下列歌曲：</div>\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"播放\" placement=\"top\">\n          <div @click=\"playListShow(true)\" v-if=\"list.length > 0\" class=\"inline-block mt_15 pt_5 pointer play\" style=\"line-height: 20px;\">\n            <i class=\"iconfont icon-play pl_10 pr_10\" />\n          </div>\n        </el-tooltip>\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"添加到播放列表\" placement=\"top\">\n          <div @click=\"playListShow()\" v-if=\"list.length > 0\" class=\"inline-block mt_15 pt_5 pointer play\" style=\"line-height: 20px;\">\n            <i class=\"iconfont icon-list-add pl_10 pr_10\" />\n          </div>\n        </el-tooltip>\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"下载\" placement=\"top\">\n          <div @click=\"downShow\" v-if=\"list.length > 0\" class=\"inline-block mt_15 pt_5 pointer play\" style=\"line-height: 20px;\">\n            <i class=\"iconfont icon-download pl_10 pr_10\" />\n          </div>\n        </el-tooltip>\n      </div>\n    </div>\n    <div class=\"song-list\" v-if=\"allList[listId] || id === 'playing'\">\n      <div :style=\"`height:${smallIndex*71}px;`\"></div>\n      <div\n        :class=\"`song-item ${playNow.aId === s ? 'played' : ''} ${!allSongs[s].url ? 'disabled' : ''} ${((i < smallIndex) || (i > bigIndex)) ? 'hidden' : ''}`\"\n        v-for=\"(s, i) in list\"\n        v-if=\"allSongs[s] && i >= smallIndex && i <= bigIndex\"\n        :key=\"`${s}-${i}`\"\n        @click=\"playMusic(s, list, listId)\"\n      >\n        <div class=\"playing-bg\" v-if=\"playNow.aId === s\" :style=\"`width: ${playingPercent * 100}%`\">\n          <div class=\"wave-bg\"></div>\n          <div class=\"wave-bg2\"></div>\n        </div>\n        <span class=\"song-order\">{{i+1}}</span>\n        <img class=\"song-cover\" :src=\"`${allSongs[s].al && allSongs[s].al.picUrl}?param=50y50`\" alt=\"\" />\n        <span class=\"song-name\">{{allSongs[s].name}}</span>\n        <span class=\"song-artist\">{{(allSongs[s].ar || []).map((a) => a.name).join('/')}}</span>\n        <div class=\"icon-container\">\n          <i\n            v-if=\"userList[allSongs[s].platform] && (listId !== userList[allSongs[s].platform].favListId)\"\n            @click=\"likeMusic(s)\"\n            :class=\"`operation-icon operation-icon-1 iconfont icon-${!!favSongMap[allSongs[s].platform][s] ? 'like' : 'unlike'}`\"\n          />\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"添加到歌单\" placement=\"top\">\n            <i\n              v-if=\"allSongs[s].from !== 'migu'\"\n              @click=\"playlistTracks(s, listId, 'add', 'ADD_SONG_2_LIST', allSongs[s].platform)\"\n              class=\"operation-icon operation-icon-2 iconfont icon-add\"\n            />\n          </el-tooltip>\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"移出播放列表\" placement=\"top\">\n            <i\n              v-if=\"playingList.map[s]\"\n              @click=\"removePlaying(s)\"\n              class=\"operation-icon operation-icon-3 iconfont icon-list-reomve\"\n            />\n          </el-tooltip>\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"加入播放列表\" placement=\"top\">\n            <i\n              v-if=\"allSongs[s].url && !playingList.map[s]\"\n              @click=\"addPlaying(s)\"\n              class=\"operation-icon operation-icon-3 iconfont icon-list-add\"\n            />\n          </el-tooltip>\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"下载\" placement=\"top\">\n            <i\n              v-if=\"!!allSongs[s].url\"\n              @click=\"download(s)\"\n              class=\"operation-icon operation-icon-4 iconfont icon-download\"\n            />\n          </el-tooltip>\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"从歌单中删除\" placement=\"top\">\n            <i\n              @click=\"playlistTracks(s, listId, 'del', 'DEL_SONG')\"\n              v-if=\"userList[allSongs[s].platform] && userList[allSongs[s].platform].mine && userList[allSongs[s].platform].mine[listId]\"\n              class=\"operation-icon operation-icon-5 iconfont icon-delete\"\n            />\n          </el-tooltip>\n        </div>\n      </div>\n      <div :style=\"`min-height:0;height:${(list.length - bigIndex)*71}px;`\"></div>\n      <div class=\"focus-btn\" v-if=\"list.indexOf(playNow.aId) > -1\" @click=\"scrollToPlayNow\">\n        <i class=\"iconfont icon-focus\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { getQueryFromUrl } from \"../assets/utils/stringHelper\";\n  import {\n    getPlaylist,\n    likeMusic,\n    download,\n    collectPlaylist,\n  } from \"../assets/utils/request\";\n  import { mapGetters } from 'vuex';\n  import Storage from \"../assets/utils/Storage\";\n  import { handlePlayingList } from \"../assets/utils/util\";\n\n  export default {\n    name: \"PlayListDetail\",\n    data() {\n      return {\n        id: getQueryFromUrl('id'),\n        listId: '',\n        search: '',\n        list: [],\n        listInfo: null,\n        loading: true,\n        platform: getQueryFromUrl('from') || '163',\n        smallIndex: 0,\n        bigIndex: 0,\n        qqId: Storage.get('qqId'),\n        showScrollTo: false,\n      }\n    },\n    computed: {\n      ...mapGetters({\n        playingList: 'getPlayingList',\n        userList: 'getUserList',\n        qUserList: 'getQUserList',\n        allList: 'getAllList',\n        allSongs: 'getAllSongs',\n        playNow: 'getPlaying',\n        user: 'getUser',\n        playingPercent: 'getPlayingPercent',\n        favSongMap: 'getFavSongMap',\n      })\n    },\n    watch: {\n      allList() {\n        this.searchList();\n      },\n      list() {\n        this.$nextTick(this.getShowIndex);\n      },\n      search() {\n        this.searchList();\n      },\n      $route(){\n        this.platform = this.$route.query.from || '163';\n        this.id = this.$route.query.id.replace(`${this.platform}_`, '');\n        this.listId = `${this.platform}_${this.id}`;\n        this.init();\n      },\n      playingList: {\n        handler() {\n          if (this.id === 'playing') {\n            this.init();\n          }\n        },\n        deep: true,\n      },\n    },\n    created() {\n      const { allList, id, userList, platform } = this;\n      this.id = String(id).replace(`${platform}_`, '');\n      this.listId = `${platform}_${this.id}`;\n      this.list = allList[this.listId] || [];\n      this.init();\n    },\n    methods: {\n      async init() {\n        const { id, platform, qUserList, list } = this;\n        this.loading = false;\n        if (id === 'playing') {\n          this.listInfo = null;\n          return this.list = this.playingList.trueList || [];\n        }\n        const listId = this.listId = `${platform}_${id}`;\n        if (listId === `${platform}_daily`) {\n          this.listInfo = null;\n          return this.list = this.allList[listId] || [];\n        }\n        this.loading = true;\n        const listInfo = await getPlaylist(id, platform);\n        if (!listInfo) {\n          return this.$message.error('获取歌单信息出错！');\n        }\n        this.listInfo = listInfo;\n        this.songs = this.listInfo.songs;\n        this.loading = false;\n      },\n      playListShow(playing) {\n        const { allSongs, list, listId } = this;\n        const { dispatch } = this.$store;\n        const song = allSongs[list[0]];\n        if (!song.url) {\n          return;\n        }\n        if (playing) {\n          dispatch('updatePlayNow', song);\n          dispatch('updatePlayingList', { list, listId });\n          dispatch('updatePlayingStatus', true);\n        } else {\n          dispatch('updatePlayingList', { list, more: true });\n          this.$message.success('已添加到正在播放');\n        }\n      },\n      downShow() {\n        const { allSongs, list } = this;\n        const songList = list.filter((id) => !!allSongs[id].url);\n        if (!songList.length) {\n          return this.$message.info('没有歌呢');\n        }\n\n        this.$confirm(`批量下载${songList.length}首歌曲？`, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$message.info('为了防止服务器误封高频ip，批量下载一秒增加一个任务');\n          songList.forEach((id, i) => {\n            setTimeout(() => download(id), i * 1000);\n          })\n        });\n\n      },\n      searchList() {\n        const { search, allList, listId, id, allSongs, platform } = this;\n        const rex = search.replace(/\\/|\\s|\\t|,|，|-|/g, '').toLowerCase();\n        let rawList = [];\n        switch (listId) {\n          case `${platform}_playing`:\n            rawList = this.playingList.trueList;\n            break;\n          case `${platform}_${id}`:\n            rawList = this.allList[listId];\n            break;\n          default:\n            rawList = allList[id];\n            break;\n        }\n        rawList = rawList || [];\n        if (!rex) {\n          this.showScrollTo = rawList.indexOf(this.playNow.aId) !== -1;\n          return this.list = rawList;\n        }\n        this.list = rawList.filter((s) => (\n          `${allSongs[s].name}\n          ${(allSongs[s].ar || []).map((a) => a.name)}\n          ${allSongs[s].al.name}\n          ${allSongs[s].name}\n          ${allSongs[s].al.name}\n          ${(allSongs[s].ar || []).map((a) => a.name)}\n          ${allSongs[s].name}`\n            .replace(/\\s/g, '')\n            .toLowerCase()\n            .indexOf(rex) > -1\n        ));\n      },\n      likeMusic,\n      playlistTracks(tracks, pid, op, type, platform) {\n        window.event.stopPropagation();\n        this.$store.dispatch('setOperation', { data: { tracks, pid, op }, type, platform });\n      },\n      download,\n      collectPlaylist,\n      getShowIndex() {\n        const dom = document.getElementsByClassName('list-detail-container')[0];\n        const smallHeight = Math.max(dom.scrollTop - 500, 0);\n        this.smallIndex = Math.floor(smallHeight / 71);\n        const bigHeight = dom.clientHeight + dom.scrollTop + 300;\n        this.bigIndex = Math.floor(bigHeight / 71);\n      },\n      scrollToPlayNow() {\n        const { list, playNow } = this;\n        const index = this.list.findIndex((v) => v === playNow.aId);\n        const domL = document.getElementsByClassName('song-list')[0];\n        if (index > -1) {\n          document.getElementsByClassName('list-detail-container')[0].scrollTo(0, index * 71 + domL.offsetTop);\n        }\n      },\n      ...handlePlayingList,\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .list-detail-container {\n    width: 40%;\n    position: absolute;\n    right: 0;\n    height: calc(100% - 20px);\n    top: 20px;\n    overflow-y: auto;\n    background: #0001;\n    border-left: 1px solid #fff5;\n\n    &::-webkit-scrollbar {\n      width: 0;\n      height:8px;\n      background-color:rgba(0,0,0,0);\n    }\n\n    .list-info-detail {\n      padding: 15px 15px 0 15px;\n      color: #fff9;\n      background: #0003;\n      box-shadow: 0 2px 10px #0005;\n      margin-bottom: 10px;\n\n      .list-info-cover {\n        border-radius: 20px;\n        opacity: 0.6;\n        display: inline-block;\n        vertical-align: top;\n        width: 100px;\n        height: 100px;\n      }\n\n      .list-info-txt {\n        display: inline-block;\n        width: calc(100% - 140px);\n        vertical-align: top;\n        padding-left: 30px;\n\n        .list-info-name {\n          font-size: 24px;\n          font-weight: bold;\n        }\n\n        .list-info-creator {\n          margin-top: 5px;\n          opacity: 0.8;\n          transition: 0.3s;\n          cursor: pointer;\n\n          .creator-name:hover {\n            text-decoration: underline;\n          }\n\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n\n      .search-input {\n        margin-top: 15px;\n        background: transparent;\n        border: transparent;\n        color: white;\n        padding-bottom: 10px;\n        font-size: 20px;\n        outline: none !important;\n        border-bottom: 1px solid #0003;\n        width: calc(100% - 200px);\n        margin-left: 0;\n\n        &::-webkit-input-placeholder {\n          color: rgba(255,255,255,0.5);\n        }\n      }\n    }\n\n    .song-list {\n      padding-left: 20px;\n      padding-right: 20px;\n      position: relative;\n\n      .focus-btn {\n        position: fixed;\n        bottom: 120px;\n        right: 40px;\n        width: 50px;\n        height: 50px;\n        border-radius: 50%;\n        background: #F23C3C;\n        border: 2px solid #F23C3C;\n        opacity: 0.3;\n        font-size: 0;\n        cursor: pointer;\n        box-shadow: 0 0 20px #333;\n        transition: 0.3s;\n        overflow: hidden;\n        z-index: 10;\n        text-align: center;\n\n        .iconfont {\n          font-size: 28px;\n          color: #fff;\n          line-height: 50px;\n        }\n\n        &:hover {\n          opacity: 0.7;\n        }\n\n      }\n\n      .song-item {\n        color: #fffc;\n        opacity: 0.8;\n        transition: 0.3s;\n        height: 70px;\n        border-bottom: 1px solid #fff5;\n        overflow: hidden;\n        position: relative;\n        box-shadow: 0 0 0;\n\n        &.disabled {\n          opacity: 0.3;\n        }\n\n        &.played {\n          opacity: 1;\n\n          .song-order {\n            color: #409EFF80;\n            text-shadow: 0 0 5px #409EFF;\n          }\n        }\n\n        &.hidden {\n          span, img, div {\n            display: none !important;\n          }\n        }\n\n        &:hover {\n          opacity: 1;\n          box-shadow: 0 0 10px #0003;\n          border-bottom: 1px solid transparent;\n          \n          &.played {\n            .song-order {\n              color: #409EFF80;\n            }\n          }\n\n          &.disabled {\n            opacity: 0.3;\n          }\n\n          .song-artist {\n            transform: translate(90px);\n          }\n          \n          .song-order {\n            color: #fff5;\n            transform: translate(0, 10px);\n          }\n\n          .song-cover {\n            filter: blur(5px);\n            opacity: 0.4;\n            transform: rotate(-30deg) scale(2) translate(0, 10px);\n          }\n\n          .song-name {\n            font-weight: bold;\n            transform: scale(1.22) translate(75px);\n            color: #fff;\n          }\n\n          .icon-container {\n            .operation-icon {\n              transform: translate(0, 0);\n              opacity: 0.8;\n            }\n          }\n        }\n\n        .song-order {\n          font-size: 80px;\n          font-weight: bold;\n          color: #fff3;\n          vertical-align: 30px;\n          transition: 0.3s;\n          position: absolute;\n          z-index: 2;\n        }\n\n        .song-cover {\n          width: 50px;\n          height: 50px;\n          vertical-align: top;\n          position: absolute;\n          z-index: 0;\n          opacity: 0.8;\n          filter: blur(0);\n          transform: rotate(0) scale(1) translate(65px, 10px);\n          transition: 0.4s;\n        }\n\n        .song-name {\n          font-size: 18px;\n          display: inline-block;\n          vertical-align: top;\n          line-height: 50px;\n          transform: translate(150px);\n          transform-origin: left;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          color: #fff;\n          font-weight: normal;\n          transition: 0.3s\n        }\n\n        .song-artist {\n          font-size: 14px;\n          position: absolute;\n          bottom: 5px;\n          left: 0;\n          transform: translate(400px);\n          display: inline-block;\n          vertical-align: top;\n          padding-top: 20px;\n          transition: 0.3s;\n          max-width: 250px;\n          overflow: hidden;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n        }\n\n        .icon-container {\n          position: absolute;\n          bottom: 5px;\n          left: 350px;\n\n          @for $i from 1 through 7 {\n            .operation-icon-#{$i} {\n              transform: translate(0, 40px);\n              transition: 0.3s #{($i - 1) * 0.1}s;\n              text-shadow: 0 2px 5px #0008;\n              cursor: pointer;\n              margin-right: 12px;\n              opacity: 0;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayListDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayListDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlayListDetail.vue?vue&type=template&id=d70ae186&scoped=true&\"\nimport script from \"./PlayListDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./PlayListDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlayListDetail.vue?vue&type=style&index=0&id=d70ae186&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d70ae186\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayListDetail.vue?vue&type=style&index=0&id=d70ae186&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayListDetail.vue?vue&type=style&index=0&id=d70ae186&lang=scss&scoped=true&\""],"sourceRoot":""}