{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.array.find-index.js","webpack:///./src/views/Simple.vue?611a","webpack:///./src/views/Simple.vue?9e32","webpack:///src/views/Simple.vue","webpack:///./src/views/Simple.vue?a9d2","webpack:///./src/views/Simple.vue"],"names":["$export","$find","KEY","forced","Array","P","F","findIndex","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","class","showCover","staticClass","attrs","playNow","al","picUrl","allSongs","aId","_v","_s","name","_l","a","key","id","rawTrans","showTrans","lyricList","startKey","str","_e","trans","item","lyricKey","on","$event","updateSetting","staticStyle","staticRenderFns","component"],"mappings":"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","file":"js/chunk-b8ecedc0.7c1274b4.js","sourcesContent":["'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Simple.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Simple.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"simple-container \" + (!_vm.showCover && 'hide-cover'))},[_c('div',{staticClass:\"img-container\"},[_c('img',{staticClass:\"song-img\",attrs:{\"src\":_vm.playNow.al.picUrl,\"alt\":\"\"}})]),(_vm.allSongs[_vm.playNow.aId])?_c('div',{staticClass:\"song-info\"},[_c('div',{staticClass:\"d-table\"},[_c('div',{staticClass:\"d-table-cell\"},[_c('div',{staticClass:\"song-name\"},[_vm._v(_vm._s(_vm.playNow.name))]),_c('div',{staticClass:\"song-artist\"},_vm._l((_vm.playNow.ar),function(a){return _c('span',{key:a.id},[_vm._v(_vm._s(a.name)+\" \")])}),0),(_vm.playNow.lyric)?_c('div',{staticClass:\"song-lyric\"},[(_vm.playNow.rawTrans && _vm.showTrans)?_c('div',[(_vm.lyricList[_vm.startKey+1])?_c('div',{staticClass:\"lyric-item\"},[_vm._v(\"\\n              \"+_vm._s(_vm.lyricList[_vm.startKey+1].str)+\"\\n            \")]):_vm._e(),_c('div',{staticClass:\"lyric-item\"}),(_vm.lyricList[_vm.startKey+1])?_c('div',{staticClass:\"lyric-item\"},[_vm._v(\"\\n              \"+_vm._s(_vm.lyricList[_vm.startKey+1].trans)+\"\\n            \")]):_vm._e()]):_c('div',_vm._l(([_vm.startKey, _vm.startKey + 1, _vm.startKey + 2]),function(item){return (_vm.lyricList[item])?_c('div',{key:(\"lyric-\" + item),class:(\"lyric-item \" + (_vm.lyricKey === item && 'active'))},[_vm._v(\"\\n              \"+_vm._s(_vm.lyricList[item].str)+\"\\n            \")]):_vm._e()}),0)]):_vm._e(),_c('div',{staticClass:\"page-right-btn\",on:{\"click\":function($event){return _vm.updateSetting('Trans')}}},[(_vm.playNow.rawTrans)?_c('div',{staticClass:\"right-btn\"},[_c('div',{staticClass:\"iconfont icon-trans\",staticStyle:{\"font-size\":\"28px\"}},[(!_vm.showTrans)?_c('div',{staticClass:\"hide-trans\"}):_vm._e()]),_c('div',{staticClass:\"txt-btn\"},[_vm._v(\"翻译\")])]):_vm._e(),_c('div',{staticClass:\"right-btn\",on:{\"click\":function($event){return _vm.updateSetting('Cover')}}},[_c('div',{staticClass:\"iconfont icon-cover\"},[(!_vm.showCover)?_c('div',{staticClass:\"hide-trans\"}):_vm._e()]),_c('div',{staticClass:\"txt-btn\"},[_vm._v(\"封面\")])])])])])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"`simple-container ${!showCover && 'hide-cover'}`\">\n    <div class=\"img-container\">\n      <img class=\"song-img\" :src=\"playNow.al.picUrl\" alt=\"\">\n    </div>\n    <div class=\"song-info\" v-if=\"allSongs[playNow.aId]\">\n      <div class=\"d-table\">\n        <div class=\"d-table-cell\">\n          <div class=\"song-name\">{{playNow.name}}</div>\n          <div class=\"song-artist\"><span v-for=\"a in playNow.ar\" :key=\"a.id\">{{a.name}} </span></div>\n\n          <div class=\"song-lyric\" v-if=\"playNow.lyric\">\n            <div v-if=\"playNow.rawTrans && showTrans\">\n              <div class=\"lyric-item\" v-if=\"lyricList[startKey+1]\">\n                {{lyricList[startKey+1].str}}\n              </div>\n              <div class=\"lyric-item\"> </div>\n              <div class=\"lyric-item\" v-if=\"lyricList[startKey+1]\">\n                {{lyricList[startKey+1].trans}}\n              </div>\n            </div>\n            <div v-else>\n              <div :class=\"`lyric-item ${lyricKey === item && 'active'}`\" :key=\"`lyric-${item}`\" v-if=\"lyricList[item]\" v-for=\"(item) in [startKey, startKey + 1, startKey + 2]\">\n                {{lyricList[item].str}}\n              </div>\n            </div>\n          </div>\n\n          <div class=\"page-right-btn\" @click=\"updateSetting('Trans')\">\n            <div class=\"right-btn\" v-if=\"playNow.rawTrans\">\n              <div class=\"iconfont icon-trans\" style=\"font-size: 28px;\">\n                <div class=\"hide-trans\" v-if=\"!showTrans\" />\n              </div>\n              <div class=\"txt-btn\">翻译</div>\n            </div>\n\n            <div class=\"right-btn\" @click=\"updateSetting('Cover')\">\n              <div class=\"iconfont icon-cover\">\n                <div class=\"hide-trans\" v-if=\"!showCover\" />\n              </div>\n              <div class=\"txt-btn\">封面</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { mapGetters } from 'vuex';\n  import Storage from \"../assets/utils/Storage\";\n\n  export default {\n    name: \"Simple\",\n    data() {\n      return {\n        lyricKey: 0,\n        startKey: 0,\n        lyricList: [],\n        showTrans: Storage.get('SHOW_SIMPLE_TRANS') === '1',\n        showCover: Storage.get('SHOW_SIMPLE_COVER') === '1',\n      }\n    },\n    computed: {\n      ...mapGetters({\n        playNow: 'getPlaying',\n        allSongs: 'getAllSongs',\n        percent: 'getPlayingPercent',\n      })\n    },\n    created() {\n      const { dispatch } = this.$store;\n      dispatch('updateShowCover', false);\n      dispatch('updateMode', 'simple');\n      this.lyricList = Object.values(this.playNow.lyric || {}) || [];\n      this.renderLyric();\n    },\n    watch: {\n      playNow(v) {\n        this.lyricKey = 0;\n        this.startKey = -1;\n        this.lyricList = Object.values(v.lyric || {}) || [];\n      },\n      percent() {\n        this.renderLyric();\n      },\n    },\n    methods: {\n      renderLyric() {\n        const { playNow } = this;\n        const { lyric } = playNow;\n        if (!lyric) {\n          return;\n        }\n        const lyricKeys = Object.keys(lyric);\n        const current = document.getElementById('m-player').currentTime * 1000;\n        const key = lyricKeys.findIndex((k) => (k - 300) >= current);\n        let lyricKey = current;\n        let startKey = 0;\n        switch (key) {\n          case (lyricKeys.length - 1):\n            lyricKey = lyricKeys.length - 1;\n            startKey = lyricKeys.length - 2;\n            break;\n          case -1:\n            lyricKey = lyricKeys.length;\n            startKey = lyricKeys.length - 1;\n            break;\n          case 0:\n            lyricKey = 0;\n            startKey = 0;\n            break;\n          default:\n            lyricKey = key;\n            startKey = lyricKey - 1;\n        }\n\n        this.lyricKey = lyricKey - 1;\n        this.startKey = startKey - 1;\n      },\n      updateShowTrans() {\n        this.showTrans = !this.showTrans;\n        Storage.set('SHOW_LRC_TRANS', Number(this.showTrans));\n      },\n      updateSetting(key) {\n        const kStr = `show${key}`\n        this[kStr] = !this[kStr];\n        Storage.set(`SHOW_SIMPLE_${key.toUpperCase()}`, Number(this[kStr]));\n      },\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  .simple-container {\n    height: 60vh;\n    width: 100%;\n    padding: 0 10%;\n    padding-top: calc(30vh - 100px);\n    transition: 0.3s;\n\n    &.hide-cover {\n      padding-top: calc(30vh - 200px);\n\n      .img-container {\n        width: 0;\n        opacity: 0;\n      }\n\n      .song-info {\n        width: calc(80vw - 40px);\n      }\n    }\n\n    .img-container {\n      opacity: 0.7;\n      overflow: hidden;\n      display: inline-block;\n      vertical-align: top;\n      border-radius: 20%;\n      animation: imgBR 13s infinite;\n      transition: 0.3s;\n      width: 60vh;\n\n      @keyframes imgBR {\n        from, to {\n          border-radius: 20%;\n          transform: scale(1);\n        }\n        30%, 80% {\n          border-radius: 17%;\n          transform: scale(1.01);\n        }\n\n        60% {\n          border-radius: 21%;\n          transform: scale(0.995);\n        }\n\n      }\n\n      .song-img {\n        height: 60vh;\n      }\n\n    }\n\n    .song-info {\n      display: inline-block;\n      vertical-align: top;\n      text-align: center;\n      width: calc(60vw - 100px);\n      color: #fffa;\n      font-weight: bold;\n      font-size: 26px;\n      line-height: 32px;\n      height: 60vh;\n      transition: 0.3s;\n\n      .d-table {\n        display: table;\n        width: 100%;\n        height: 60vh;\n      }\n      .d-table-cell {\n        display: table-cell;\n        vertical-align: middle;\n        position: relative;\n      }\n\n      .song-artist {\n        font-size: 16px;\n        margin-top: 15px;\n      }\n\n      .song-lyric {\n        font-size: 20px;\n        font-weight: normal;\n        margin-top: 50px;\n\n        .lyric-item {\n          padding: 5px 0;\n          opacity: 0.6;\n\n          &.active {\n            opacity: 0.9;\n          }\n        }\n      }\n    }\n\n    .page-right-btn {\n      position: fixed;\n      top: calc(50% - 20px);\n      transform: translateX(95px);\n      right: 0;\n      width: 140px;\n      background: #fff3;\n      opacity: 0.2;\n      transition: 0.3s;\n      padding-left: 10px;\n      box-shadow: 0 0 5px #fff;\n      border-radius: 20px;\n      box-sizing: border-box;\n\n      .right-btn {\n        margin: 10px 0;\n        text-align: left;\n        cursor: pointer;\n      }\n\n      &:hover {\n        opacity: 0.4;\n        box-shadow: 0 0 10px #fff;\n        transform: translateX(50px);\n      }\n\n      .txt-btn {\n        display: inline-block;\n        font-size: 14px;\n        line-height: 32px;\n        vertical-align: top;\n        padding-left: 12px;\n      }\n\n      .iconfont {\n        font-size: 24px;\n        color: #fff;\n        cursor: pointer;\n        display: inline-block;\n        line-height: 28px;\n        position: relative;\n\n        .hide-trans {\n          position: absolute;\n          width: 36px;\n          border: 2px solid #fff;\n          transform: rotate(45deg);\n          top: 12px;\n          left: -7px;\n          background: #fff;\n          border-radius: 3px;\n        }\n\n      }\n    }\n  }\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Simple.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Simple.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Simple.vue?vue&type=template&id=47ea81c6&\"\nimport script from \"./Simple.vue?vue&type=script&lang=js&\"\nexport * from \"./Simple.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Simple.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}