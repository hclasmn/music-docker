(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e633168"],{"68d4":function(t,i,n){},c2f4:function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("PlayListDetail",{attrs:{listId:t.$route.query.from+"_"+t.$route.query.id,platform:t.$route.query.from}})},s=[],a=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"list-detail-container",on:{scroll:t.getShowIndex}},[!t.listInfo&&t.loading&&0===t.list.length?n("div",{staticClass:"text-center fc_fff ft_20",staticStyle:{"padding-top":"100px",opacity:"0.8","letter-spacing":"2px"}},[t._v("拼命查找了！")]):t._e(),t.loading?t._e():n("div",{staticClass:"list-info-detail"},[t.listInfo?n("div",[n("img",{staticClass:"list-info-cover",attrs:{src:t.listInfo.cover}}),n("div",{staticClass:"list-info-txt"},[n("div",{staticClass:"list-info-name"},[t._v(t._s(t.listInfo.name))]),n("div",{staticClass:"list-info-creator"},[t.userList[t.platform]&&!t.userList[t.platform].mine[t.listId]?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.userList[t.platform].sub[t.listId]?"已收藏":"收藏",placement:"top"}},[n("i",{class:"collect-btn mr_10 iconfont icon-"+(t.userList[t.platform].sub[t.listId]?"collected":"collect"),on:{click:function(i){return t.collectPlaylist(t.listInfo)}}})]):t._e(),n("span",[t._v("By "),n("span",{staticClass:"creator-name"},[t._v(t._s(t.listInfo.creator.nick))])])],1)])]):t._e(),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search-input",attrs:{type:"text",placeholder:"找呀找呀找歌曲"},domProps:{value:t.search},on:{input:function(i){i.target.composing||(t.search=i.target.value)}}}),n("div",{staticClass:"inline-block mt_15 pt_5"},[t._v("下列歌曲：")]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"播放",placement:"top"}},[t.list.length>0?n("div",{staticClass:"inline-block mt_15 pt_5 pointer play",staticStyle:{"line-height":"20px"},on:{click:function(i){return t.playListShow(!0)}}},[n("i",{staticClass:"iconfont icon-play pl_10 pr_10"})]):t._e()]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加到播放列表",placement:"top"}},[t.list.length>0?n("div",{staticClass:"inline-block mt_15 pt_5 pointer play",staticStyle:{"line-height":"20px"},on:{click:function(i){return t.playListShow()}}},[n("i",{staticClass:"iconfont icon-list-add pl_10 pr_10"})]):t._e()]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下载",placement:"top"}},[t.list.length>0?n("div",{staticClass:"inline-block mt_15 pt_5 pointer play",staticStyle:{"line-height":"20px"},on:{click:t.downShow}},[n("i",{staticClass:"iconfont icon-download pl_10 pr_10"})]):t._e()])],1)]),t.allList[t.listId]||"playing"===t.id?n("div",{staticClass:"song-list"},[n("div",{style:"height:"+71*t.smallIndex+"px;"}),t._l(t.list,(function(i,e){return t.allSongs[i]&&e>=t.smallIndex&&e<=t.bigIndex?n("div",{key:i+"-"+e,class:"song-item "+(t.playNow.aId===i?"played":"")+" "+(t.allSongs[i].url?"":"disabled")+" "+(e<t.smallIndex||e>t.bigIndex?"hidden":""),on:{click:function(n){return t.playMusic(i,t.list,t.listId)}}},[t.playNow.aId===i?n("div",{staticClass:"playing-bg",style:"width: "+100*t.playingPercent+"%"},[n("div",{staticClass:"wave-bg"}),n("div",{staticClass:"wave-bg2"})]):t._e(),n("span",{staticClass:"song-order"},[t._v(t._s(e+1))]),n("img",{staticClass:"song-cover",attrs:{src:(t.allSongs[i].al&&t.allSongs[i].al.picUrl)+"?param=50y50",alt:""}}),n("span",{staticClass:"song-name"},[t._v(t._s(t.allSongs[i].name))]),n("span",{staticClass:"song-artist"},[t._v(t._s((t.allSongs[i].ar||[]).map((function(t){return t.name})).join("/")))]),n("div",{staticClass:"icon-container"},[t.userList[t.allSongs[i].platform]&&t.listId!==t.userList[t.allSongs[i].platform].favListId?n("i",{class:"operation-icon operation-icon-1 iconfont icon-"+(t.favSongMap[t.allSongs[i].platform][i]?"like":"unlike"),on:{click:function(n){return t.likeMusic(i)}}}):t._e(),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加到歌单",placement:"top"}},["migu"!==t.allSongs[i].from?n("i",{staticClass:"operation-icon operation-icon-2 iconfont icon-add",on:{click:function(n){return t.playlistTracks(i,t.listId,"add","ADD_SONG_2_LIST",t.allSongs[i].platform)}}}):t._e()]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"移出播放列表",placement:"top"}},[t.playingList.map[i]?n("i",{staticClass:"operation-icon operation-icon-3 iconfont icon-list-reomve",on:{click:function(n){return t.removePlaying(i)}}}):t._e()]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"加入播放列表",placement:"top"}},[t.allSongs[i].url&&!t.playingList.map[i]?n("i",{staticClass:"operation-icon operation-icon-3 iconfont icon-list-add",on:{click:function(n){return t.addPlaying(i)}}}):t._e()]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下载",placement:"top"}},[t.allSongs[i].url?n("i",{staticClass:"operation-icon operation-icon-4 iconfont icon-download",on:{click:function(n){return t.download(i)}}}):t._e()]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"从歌单中删除",placement:"top"}},[t.userList[t.allSongs[i].platform]&&t.userList[t.allSongs[i].platform].mine&&t.userList[t.allSongs[i].platform].mine[t.listId]?n("i",{staticClass:"operation-icon operation-icon-5 iconfont icon-delete",on:{click:function(n){return t.playlistTracks(i,t.listId,"del","DEL_SONG")}}}):t._e()])],1)]):t._e()})),n("div",{style:"min-height:0;height:"+71*(t.list.length-t.bigIndex)+"px;"}),t.list.indexOf(t.playNow.aId)>-1?n("div",{staticClass:"focus-btn",on:{click:t.scrollToPlayNow}},[n("i",{staticClass:"iconfont icon-focus"})]):t._e()],2):t._e()])},l=[],o=(n("5ab2"),n("e10e"),n("e204"),n("cc57"),n("c0c3"),n("6d57"),n("6a61"),n("cf7f")),c=(n("f548"),n("ce3c")),r=n("ceb6"),p=n("9f3a"),f=n("f503");function u(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.push.apply(n,e)}return n}function d(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?u(Object(n),!0).forEach((function(i){Object(c["a"])(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))}))}return t}var h={name:"PlayListDetail",data:function(){return{search:"",list:[],listInfo:null,loading:!0,smallIndex:0,bigIndex:0,showScrollTo:!1}},props:{listId:"",platform:""},computed:d({},Object(p["b"])({playingList:"getPlayingList",userList:"getUserList",qUserList:"getQUserList",allList:"getAllList",allSongs:"getAllSongs",playNow:"getPlaying",user:"getUser",playingPercent:"getPlayingPercent",favSongMap:"getFavSongMap"})),watch:{allList:function(){this.searchList()},list:function(){this.$nextTick(this.getShowIndex)},search:function(){this.searchList()},listId:function(){this.init()},$route:function(){var t=this.platform,i=this.listId;this.id=i.replace("".concat(t,"_"),""),this.init()},playingList:{handler:function(){"playing"===this.id&&this.init()},deep:!0}},created:function(){var t=this.allList,i=this.listId;this.list=t[i]||[],this.init()},methods:d({init:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var i,n,e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this.platform,n=this.listId,e=this.id=n.replace("".concat(i,"_"),""),this.loading=!1,"playing"!==e){t.next=6;break}return this.listInfo=null,t.abrupt("return",this.list=this.playingList.trueList||[]);case 6:if(n!=="".concat(i,"_daily")){t.next=9;break}return this.listInfo=null,t.abrupt("return",this.list=this.allList[n]||[]);case 9:return this.loading=!0,t.next=12,Object(r["i"])(e,i);case 12:if(s=t.sent,s){t.next=15;break}return t.abrupt("return",this.$message.error("获取歌单信息出错！"));case 15:this.listInfo=s,this.songs=this.listInfo.songs,this.loading=!1;case 18:case"end":return t.stop()}}),t,this)})));function i(){return t.apply(this,arguments)}return i}(),playListShow:function(t){var i=this.allSongs,n=this.list,e=this.listId,s=this.$store.dispatch,a=i[n[0]];a.url&&(t?(s("updatePlayNow",a),s("updatePlayingList",{list:n,listId:e}),s("updatePlayingStatus",!0)):(s("updatePlayingList",{list:n,more:!0}),this.$message.success("已添加到正在播放")))},downShow:function(){var t=this,i=this.allSongs,n=this.list,e=n.filter((function(t){return!!i[t].url}));if(!e.length)return this.$message.info("没有歌呢");this.$confirm("批量下载".concat(e.length,"首歌曲？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message.info("为了防止服务器误封高频ip，批量下载一秒增加一个任务"),e.forEach((function(t,i){setTimeout((function(){return Object(r["e"])(t)}),1e3*i)}))}))},searchList:function(){var t=this.search,i=this.allList,n=this.listId,e=this.id,s=this.allSongs,a=this.platform,l=t.replace(/\/|\s|\t|,|，|-|/g,"").toLowerCase(),o=[];switch(n){case"".concat(a,"_playing"):o=this.playingList.trueList;break;case"".concat(a,"_").concat(e):o=this.allList[n];break;default:o=i[e];break}if(o=o||[],!l)return this.showScrollTo=-1!==o.indexOf(this.playNow.aId),this.list=o;this.list=o.filter((function(t){return"".concat(s[t].name,"\n        ").concat((s[t].ar||[]).map((function(t){return t.name})),"\n        ").concat(s[t].al.name,"\n        ").concat(s[t].name,"\n        ").concat(s[t].al.name,"\n        ").concat((s[t].ar||[]).map((function(t){return t.name})),"\n        ").concat(s[t].name).replace(/\s/g,"").toLowerCase().indexOf(l)>-1}))},likeMusic:r["m"],playlistTracks:function(t,i,n,e,s){window.event.stopPropagation(),this.$store.dispatch("setOperation",{data:{tracks:t,pid:i,op:n},type:e,platform:s})},download:r["e"],collectPlaylist:r["b"],getShowIndex:function(){var t=document.getElementsByClassName("list-detail-container")[0],i=Math.max(t.scrollTop-500,0);this.smallIndex=Math.floor(i/71);var n=t.clientHeight+t.scrollTop+300;this.bigIndex=Math.floor(n/71)},scrollToPlayNow:function(){this.list;var t=this.playNow,i=this.list.findIndex((function(i){return i===t.aId})),n=document.getElementsByClassName("song-list")[0];i>-1&&document.getElementsByClassName("list-detail-container")[0].scrollTo(0,71*i+n.offsetTop)}},f["a"])},g=h,m=(n("c60e"),n("9ca4")),y=Object(m["a"])(g,a,l,!1,null,"16acf595",null),v=y.exports,_={name:"PlayListDetailPage",components:{PlayListDetail:v},data:function(){return{}},computed:{},watch:{},created:function(){},methods:{}},b=_,w=Object(m["a"])(b,e,s,!1,null,"2d30ef31",null);i["default"]=w.exports},c60e:function(t,i,n){"use strict";var e=n("68d4"),s=n.n(e);s.a},e204:function(t,i,n){"use strict";var e=n("e46b"),s=n("013f")(6),a="findIndex",l=!0;a in[]&&Array(1)[a]((function(){l=!1})),e(e.P+e.F*l,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n("0e8b")(a)}}]);
//# sourceMappingURL=chunk-6e633168.c973c517.js.map